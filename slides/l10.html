<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Lesson 10 - Forms</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>

<p><a href="https://github.com/generalassembly/ga-ruby-on-rails-for-devs/raw/master/images/ga.png" target="_blank"><img src="https://github.com/generalassembly/ga-ruby-on-rails-for-devs/raw/master/images/ga.png" alt="GeneralAssemb.ly" title="GeneralAssemb.ly" style="max-width:100%;"></a></p>

<h1><a id="user-content-bewd---forms--validations" class="anchor" href="#bewd---forms--validations" aria-hidden="true"><span class="octicon octicon-link"></span></a>BEWD - Forms &amp; Validations</h1>
<h3><a id="user-content-instructor-name" class="anchor" href="#instructor-name" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sam Backus</h3>
<h3><a id="user-content-instructor-name" class="anchor" href="#instructor-name" aria-hidden="true"><span class="octicon octicon-link"></span></a>Valeria Graffeo</h3>

</section>
<section>

<h2><a id="user-content-agenda" class="anchor" href="#agenda" aria-hidden="true"><span class="octicon octicon-link"></span></a>Agenda</h2>

<ul>
<li>  Review</li>
<li>  Forms

<ul>
<li>  Search Forms, Create Forms, Partials</li>
</ul></li>
<li>  Validations</li>
<li>  Lab Time</li>
</ul>

</section>
<section>

<h2><a id="user-content-review" class="anchor" href="#review" aria-hidden="true"><span class="octicon octicon-link"></span></a>Review</h2>

<h3><a id="user-content-routes-model-view-controller" class="anchor" href="#routes-model-view-controller" aria-hidden="true"><span class="octicon octicon-link"></span></a>Routes, Model, View, Controller</h3>

<p><a href="http://www.github.com/generalassembly-studio/BEWD_Curriculum/blob/master/assets/rails/response_request.png" target="_blank"><img src="http://www.github.com/generalassembly-studio/BEWD_Curriculum/raw/master/assets/rails/response_request.png" alt="Request Response Diagram" style="max-width:100%;"></a></p>

</section>
<section>

<h2><a id="user-content-review-1" class="anchor" href="#review-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Review</h2>

<p><a href="http://www.github.com/generalassembly-studio/BEWD_Curriculum/blob/master/assets/ICL_icons/Code_along_icon_md.png" target="_blank"><img id="user-content-icon" src="http://www.github.com/generalassembly-studio/BEWD_Curriculum/raw/master/assets/ICL_icons/Code_along_icon_md.png" style="max-width:100%;"></a></p>

<h3><a id="user-content-shirts-management-app---review" class="anchor" href="#shirts-management-app---review" aria-hidden="true"><span class="octicon octicon-link"></span></a>Shirts Management App - Review</h3>

<ul>
<li>  Add controller and view to Shirts App</li>
</ul>

</section>
<section>

<h2><a id="user-content-forms" class="anchor" href="#forms" aria-hidden="true"><span class="octicon octicon-link"></span></a>Forms</h2>

<h3><a id="user-content-adding-forms-to-views" class="anchor" href="#adding-forms-to-views" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Forms to Views</h3>

<ul>
<li>  Used to 'GET' user input</li>
</ul>

<p><a href="http://www.github.com/generalassembly-studio/BEWD_Curriculum/blob/master/assets/rails/form.png" target="_blank"><img src="http://www.github.com/generalassembly-studio/BEWD_Curriculum/raw/master/assets/rails/form.png" alt="" style="max-width:100%;"></a></p>

</section>
<section>

<p><a href="http://www.github.com/generalassembly-studio/BEWD_Curriculum/blob/master/assets/ICL_icons/Code_along_icon_md.png" target="_blank"><img id="user-content-icon" src="http://www.github.com/generalassembly-studio/BEWD_Curriculum/raw/master/assets/ICL_icons/Code_along_icon_md.png" style="max-width:100%;"></a></p>

<h3><a id="user-content-shirts-management-app---search-form" class="anchor" href="#shirts-management-app---search-form" aria-hidden="true"><span class="octicon octicon-link"></span></a>Shirts Management App - Search Form</h3>

<ul>
<li>  As a user I want to be able to search for a specific T-Shirt in my collection.</li>
</ul>

</section>
<section>

<h2><a id="user-content-recap" class="anchor" href="#recap" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-search-forms" class="anchor" href="#search-forms" aria-hidden="true"><span class="octicon octicon-link"></span></a>Search Forms</h3>

<p>When a user clicks 'Search'</p>

<ol>
<li> Goes to the Shirts controller index action. </li>
<li> Sends the query as a querystring parameter (params[:q])</li>
<li> Filters results by the query</li>
<li> Searches shirts by name or description fields</li>
</ol>

</section>
<section>

<h2><a id="user-content-recap-1" class="anchor" href="#recap-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-partials" class="anchor" href="#partials" aria-hidden="true"><span class="octicon octicon-link"></span></a>Partials</h3>

<ul>
<li>  File name starts with an underscore</li>
<li>  Inserted into page using the "render" keyword</li>
<li>  Have access to instance variables</li>
<li>  Forms are great candidates for partials</li>
<li>  Rails magically handles the methods for us if we use model objects</li>
</ul>

</section>
<section>

<h2><a id="user-content-recap-2" class="anchor" href="#recap-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-queries" class="anchor" href="#queries" aria-hidden="true"><span class="octicon octicon-link"></span></a>Queries</h3>

<ul>
<li><p>Search database with the keywords "where" &amp; "LIKE"</p>

<pre><code>where('name LIKE :query OR description LIKE :query', query: "%#{query}%")
</code></pre></li>
<li>  Searches the Shirt table's name and description fields.</li>
</ul>

</section>
<section>

<h2><a id="user-content-recap-3" class="anchor" href="#recap-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-refactor" class="anchor" href="#refactor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Refactor</h3>

<ul>
<li>  Changing the structure of your code without changing behavior</li>
<li>  Move all complex data queries to the model</li>
</ul>

</section>
<section>

<p><a href="http://www.github.com/generalassembly-studio/BEWD_Curriculum/blob/master/assets/ICL_icons/Exercise_icon_md.png" target="_blank"><img id="user-content-icon" src="http://www.github.com/generalassembly-studio/BEWD_Curriculum/raw/master/assets/ICL_icons/Exercise_icon_md.png" style="max-width:100%;"></a></p>

<h2><a id="user-content-movie-app---search" class="anchor" href="#movie-app---search" aria-hidden="true"><span class="octicon octicon-link"></span></a>Movie App - Search</h2>

<ul>
<li>  Create a search box that will search for a term in the movie's title, description and the year</li>
<li>  Create partials for the search box</li>
<li>  Move all complex data queries to the model</li>
</ul>

</section>
<section>

<h2><a id="user-content-forms-1" class="anchor" href="#forms-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Forms</h2>

<h3><a id="user-content-adding-to-database" class="anchor" href="#adding-to-database" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding to Database</h3>

<ul>
<li>  We saw how a user can search the database with a form, but how does a user add to the database using forms.</li>
</ul>

</section>
<section>

<p><a href="http://www.github.com/generalassembly-studio/BEWD_Curriculum/blob/master/assets/ICL_icons/Code_along_icon_md.png" target="_blank"><img id="user-content-icon" src="http://www.github.com/generalassembly-studio/BEWD_Curriculum/raw/master/assets/ICL_icons/Code_along_icon_md.png" style="max-width:100%;"></a></p>

<h3><a id="user-content-shirt-management-app---create--edit-forms" class="anchor" href="#shirt-management-app---create--edit-forms" aria-hidden="true"><span class="octicon octicon-link"></span></a>Shirt Management App - Create &amp; Edit Forms</h3>

<ul>
<li>  As a user I want to add shirts to the database.</li>
<li>  As a user I want to edit shirts. </li>
</ul>

</section>
<section>

<h2><a id="user-content-recap-4" class="anchor" href="#recap-4" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-rest" class="anchor" href="#rest" aria-hidden="true"><span class="octicon octicon-link"></span></a>REST</h3>

<ul>
<li>  REpresentational State Transfer</li>
</ul>

</section>
<section>

<h2><a id="user-content-recap-5" class="anchor" href="#recap-5" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-rest-1" class="anchor" href="#rest-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>REST</h3>

<ul>
<li>  :resources in the routes file gives us LOTS (7) of routes</li>
<li>  Perfect for managing "Resources" (Things in your domain, like Shirts and Movies)</li>
</ul>

</section>
<section>

<h2><a id="user-content-recap-6" class="anchor" href="#recap-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-form-builders" class="anchor" href="#form-builders" aria-hidden="true"><span class="octicon octicon-link"></span></a>Form Builders</h3>

<ul>
<li>  Form Builders are awesome</li>
<li>  You MUST create an empty object in the controller for the magic to work</li>
</ul>

<pre lang="htmlmixed"><code>&lt;%= form_for @shirt do |f| %&gt;
&lt;% end %&gt;
</code></pre>

</section>
<section>

<h2><a id="user-content-recap-7" class="anchor" href="#recap-7" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-strong-parameters" class="anchor" href="#strong-parameters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong Parameters</h3>

<ul>
<li>  Rails Controllers require you to whitelist which fields a form can send</li>
<li>  Used to protect from nasty attacks. </li>
</ul>

</section>
<section>

<h2><a id="user-content-recap-8" class="anchor" href="#recap-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-validation" class="anchor" href="#validation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Validation</h3>

<ul>
<li>  Ensures that we are saving accurate information in the database.

<ul>
<li>  If our validation fails, don't add record to the database table</li>
</ul>

<a id="user-content----if-our-validation-fails-let-the-user-know-it-failed" class="anchor" href="#---if-our-validation-fails-let-the-user-know-it-failed" aria-hidden="true"><span class="octicon octicon-link"></span></a>*   If our validation fails let the user know it failed.</li>
</ul>

</section>
<section>

<h2><a id="user-content-recap-9" class="anchor" href="#recap-9" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-private-methods" class="anchor" href="#private-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Private methods</h3>

<ul>
<li>  Not routable, or callable from the outside world</li>
</ul>

</section>
<section>

<h2><a id="user-content-recap-10" class="anchor" href="#recap-10" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recap</h2>

<h3><a id="user-content-flash" class="anchor" href="#flash" aria-hidden="true"><span class="octicon octicon-link"></span></a>Flash</h3>

<ul>
<li>  Used to send messages to the user</li>
<li>  Good for letting them know something succeeded</li>
<li>  Use flash[:notice] and flash[:error]</li>
<li>  Put checks in the layout to always show messages</li>
</ul>

</section>
<section>

<h2><a id="user-content-homework" class="anchor" href="#homework" aria-hidden="true"><span class="octicon octicon-link"></span></a>Homework</h2>

<ul>
<li>Movies app due (Lesson 11)</li>
</ul>

<p>Let's start now.</p>

</section>
<section>

<p><a href="http://www.github.com/generalassembly-studio/BEWD_Curriculum/blob/master/assets/ICL_icons/Exercise_icon_md.png" target="_blank"><img id="user-content-icon" src="http://www.github.com/generalassembly-studio/BEWD_Curriculum/raw/master/assets/ICL_icons/Exercise_icon_md.png" style="max-width:100%;"></a></p>

<h2><a id="user-content-movie-app" class="anchor" href="#movie-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>Movie App</h2>

</section>
<!-- <section>

<p></p><div id="user-content-resources"><p></p>

<h2><a id="user-content-resources-forms--validation" class="anchor" href="#resources-forms--validation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resources: Forms &amp; Validation</h2>

<h3><a id="user-content-cheat-sheet" class="anchor" href="#cheat-sheet" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cheat Sheet</h3>

<h4><a id="user-content-reload-code-in-console" class="anchor" href="#reload-code-in-console" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reload Code in Console</h4>

<ul>
<li>  Reloads freshest code in the console</li>
</ul>

<div class="highlight highlight-source-ruby"><pre>reload!</pre></div>

<h4><a id="user-content-validations" class="anchor" href="#validations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Validations</h4>

<p><strong>Validate Presence</strong></p>

<ul>
<li>  Validates that title, description and year_released, rating are not empty.</li>
<li><br></li>
</ul>

<div class="highlight highlight-source-ruby"><pre>validates <span class="pl-c1">:name</span>, <span class="pl-c1">:description</span>, <span class="pl-c1">presence:</span><span class="pl-c1">true</span></pre></div>

<p><strong>Validate Length</strong></p>

<ul>
<li>  Validates that all descriptions are a minimum of 10 characters.</li>
</ul>

<div class="highlight highlight-source-ruby"><pre>validates <span class="pl-c1">:description</span>, <span class="pl-c1">length:</span> { <span class="pl-c1">minimum:</span> <span class="pl-c1">10</span> } </pre></div>

<p><strong>Numericality</strong></p>

<div class="highlight highlight-source-ruby"><pre>validates <span class="pl-c1">:year_released</span>, <span class="pl-c1">numericality:</span> { <span class="pl-c1">only_integer:</span> <span class="pl-c1">true</span> }
validates <span class="pl-c1">:rating</span>, <span class="pl-c1">numericality:</span> { <span class="pl-c1">greater_than_or_equal_to:</span> <span class="pl-c1">1</span>, <span class="pl-c1">less_than_or_equal_to:</span> <span class="pl-c1">5</span>, <span class="pl-c1">only_integer:</span> <span class="pl-c1">true</span> }</pre></div>

<p><strong>Checks if a record is valid</strong></p>

<div class="highlight highlight-source-ruby"><pre>movie.valid?</pre></div>

<p><strong>Show current errors in an object</strong></p>

<ul>
<li>  Shows all of the current errors on an object</li>
</ul>

<div class="highlight highlight-source-ruby"><pre>movie.errors</pre></div>

<h4><a id="user-content-strong-parameters-1" class="anchor" href="#strong-parameters-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strong Parameters</h4>

<div class="highlight highlight-source-ruby"><pre><span class="pl-k">def</span> <span class="pl-en">create</span>
  shirt_params <span class="pl-k">=</span> params.<span class="pl-k">require</span>(<span class="pl-c1">:shirt</span>).permit(<span class="pl-c1">:name</span>, <span class="pl-c1">:description</span>, <span class="pl-c1">:image</span>)
  shirt <span class="pl-k">=</span> <span class="pl-c1">Shirt</span>.create(shirt_params)
  redirect_to shirt
<span class="pl-k">end</span>                  </pre></div>

<h4><a id="user-content-private-methods-1" class="anchor" href="#private-methods-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Private methods</h4>

<ul>
<li>  Not routable, or callable from the outside world</li>
</ul>

<div class="highlight highlight-source-ruby"><pre><span class="pl-k">class</span> <span class="pl-en">MyClass</span>
    <span class="pl-k">def</span> <span class="pl-en">call_me</span>
        puts <span class="pl-s"><span class="pl-pds">"</span>Called<span class="pl-pds">"</span></span>
    <span class="pl-k">end</span>
    <span class="pl-k">private</span>
    <span class="pl-k">def</span> <span class="pl-en">maybe</span>
        puts <span class="pl-s"><span class="pl-pds">"</span>Forever Alone<span class="pl-pds">"</span></span>
    <span class="pl-k">end</span>
<span class="pl-k">end</span> </pre></div>

<h3><a id="user-content-still-feel-lost" class="anchor" href="#still-feel-lost" aria-hidden="true"><span class="octicon octicon-link"></span></a>Still Feel Lost?</h3>

<p>This course focus was on forms. You should have a general understanding of form builders and what happens when using a search form. Next lesson you will continue to practice Forms, Models, Views, Controller and Routes. </p>

<h4><a id="user-content-catch-up-with-these-resources" class="anchor" href="#catch-up-with-these-resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Catch Up With These Resources</h4>

<ul>
<li><p><a href="http://edgeguides.rubyonrails.org/form_helpers.html">Form Tags</a> about the different tags here and <a href="http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html">here</a></p></li>
<li><p><a href="http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html">Form Helpers</a>   </p></li>
</ul>
</div>


        </section> -->

      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true }
        ]
      });

    </script>

  </body>
</html>
